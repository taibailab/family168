<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;26&nbsp;&#31456;&nbsp;&#25105;&#20204;&#35201;&#35299;&#20915;&#20160;&#20040;&#38382;&#39064;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><style type="text/css">
body { background-image: url('images/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="start" href="index.html" title="Leona"><link rel="up" href="index.html" title="Leona"><link rel="prev" href="practice.html" title="&#31532;&nbsp;25&nbsp;&#31456;&nbsp;practice&#65288;&#24453;&#25972;&#29702;&#65289;"><link rel="next" href="database.html" title="&#31532;&nbsp;27&nbsp;&#31456;&nbsp;&#25968;&#25454;&#32500;&#25252;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.family168.com/" title="Family168"><img src="images/family168.png" border="0"></img></a></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;26&nbsp;&#31456;&nbsp;&#25105;&#20204;&#35201;&#35299;&#20915;&#20160;&#20040;&#38382;&#39064;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="practice.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="database.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="problem"></a>&#31532;&nbsp;26&nbsp;&#31456;&nbsp;&#25105;&#20204;&#35201;&#35299;&#20915;&#20160;&#20040;&#38382;&#39064;</h2></div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e3325"></a>26.1.&nbsp;<a name="solve_case"></a>&#25105;&#20204;&#35201;&#35299;&#20915;&#20160;&#20040;&#38382;&#39064;</h2></div></div></div><p>&#23558;&#21516;&#31867;&#39033;&#30446;&#20013;&#30340;&#31867;&#20284;&#21151;&#33021;&#25277;&#35937;&#20986;&#26469;&#65292;&#25552;&#20379;&#29305;&#23450;&#30340;&#35299;&#20915;&#26041;&#26696;&#65292;&#27169;&#26495;&#65292;&#20197;&#21450;&#24037;&#20855;&#31867;&#12290;</p><p>&#35753;&#20351;&#29992;&#32773;&#21487;&#20197;&#36890;&#36807;&#65306;&#29702;&#35299;&#35774;&#35745;&#24605;&#24819;&#65292;&#21442;&#32771;&#27169;&#26495;&#23454;&#29616;&#65292;&#35843;&#29992;&#24037;&#20855;&#31867;&#19977;&#26041;&#38754;&#65292;&#26356;&#24555;&#30340;&#35299;&#20915;&#21516;&#31867;&#38382;&#39064;&#12290;</p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e3330"></a>26.2.&nbsp;&#25968;&#25454;&#23383;&#20856;</h2></div></div></div><p>&#25968;&#25454;&#23383;&#20856;&#26159;&#31995;&#32479;&#20013;&#19968;&#31181;&#24120;&#29992;&#30340;&#25968;&#25454;&#32467;&#26500;&#65292;&#20027;&#35201;&#29305;&#24449;&#26377;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#23545;&#29992;&#25143;&#26469;&#35828;&#65292;&#21482;&#26377;&#8220;&#21517;&#31216;&#8221;&#36825;&#19968;&#20010;&#23383;&#27573;&#26159;&#26377;&#24847;&#20041;&#30340;</p></li><li><p>&#25968;&#25454;&#23383;&#20856;&#30340;&#21517;&#31216;&#19981;&#33021;&#37325;&#22797;</p></li></ol></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e3338"></a>26.2.1.&nbsp;NamedEntityBean.java</h3></div></div></div><pre class="programlisting">
package anni.core.domain;

import javax.persistence.Column;
import javax.persistence.Id;

public class NamedEntityBean {
    private Long id = null;
    private String name = null;

    @Id
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column(unique = true, nullable = false)
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
}
            </pre><p>pojo&#20013;&#23450;&#20041;id&#19982;name&#65292;&#27880;&#24847;&#22312;getName()&#20351;&#29992;&#30340;&#27880;&#37322;@Column(unique=true,nullable=false)&#65292;&#21517;&#31216;&#19981;&#33021;&#37325;&#22797;&#65292;&#19981;&#33021;&#20026;&#31354;&#12290;&#22312;&#25554;&#20837;&#30340;&#26102;&#20505;&#36824;&#24212;&#35813;&#21028;&#26029;&#19981;&#33021;&#20026;&#31354;&#23383;&#31526;&#20018;&#65292;&#20063;&#19981;&#33021;&#20840;&#26159;&#31354;&#26684;&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e3342"></a>26.2.2.&nbsp;NamedEntityDao.java</h3></div></div></div><p>dao&#20013;&#23450;&#20041;createOrGet&#26041;&#27861;&#65292;&#19982;&#20854;&#23545;&#24212;&#30340;&#26159;&#22312;&#21069;&#21488;&#26174;&#31034;&#30340;&#26102;&#20505;&#65292;&#35201;&#20351;&#29992;&#21487;&#20197;&#36873;&#25321;&#20063;&#21487;&#20197;&#36755;&#20837;&#30340;autocomplete&#36755;&#20837;&#26694;&#65292;&#19982;google&#30340;&#33258;&#21160;&#34917;&#23436;&#25628;&#32034;&#26694;&#31867;&#20284;&#65292;&#26082;&#21487;&#20197;&#36873;&#25321;&#24050;&#26377;&#30340;&#25968;&#25454;&#23383;&#20856;&#65292;&#20063;&#21487;&#20197;&#36755;&#20837;&#19968;&#20010;&#26032;&#35760;&#24405;&#12290;</p><pre class="programlisting">
    /**
     * &#22914;&#26524;&#25968;&#25454;&#24211;&#20013;&#19981;&#23384;&#22312;&#25351;&#23450;name&#30340;&#35760;&#24405;&#65292;&#23601;&#23558;&#27492;&#26465;&#35760;&#24405;&#25554;&#20837;&#25968;&#25454;&#24211;&#65292;&#24182;&#36820;&#22238;&#23545;&#24212;&#30340;&#23454;&#20307;&#31867;.
     * &#22914;&#26524;&#25968;&#25454;&#24211;&#20013;&#24050;&#32463;&#23384;&#22312;&#25351;&#23450;name&#30340;&#35760;&#24405;&#65292;&#23601;&#36820;&#22238;&#23545;&#24212;&#30340;&#23454;&#20307;&#31867;
     *
     * @param name &#25968;&#25454;&#23383;&#20856;&#30340;name
     * @return T &#36820;&#22238;&#23545;&#24212;&#30340;&#23454;&#20307;&#31867;
     *           &#24403;name&#20026;null&#25110;&#31354;&#23383;&#31526;&#20018;&#26102;&#65292;&#36820;&#22238;null
     *           &#24403;&#26500;&#36896;pojo&#23454;&#20363;&#26102;&#20986;&#29616;&#24322;&#24120;&#65292;&#20063;&#36820;&#22238;null
     */
    public T createOrGet(String name) {
        // &#36755;&#20837;&#30340;&#21517;&#31216;&#19981;&#24212;&#35813;&#20026;&#31354;.
        if ((name == null) || "".equals(name.trim())) {
            return null;
        }

        String beanName = name.trim();
        List&lt;T&gt; list = findBy("name", beanName); // &#36825;&#21477;&#26159;&#19981;&#26159;&#21487;&#20197;&#25913;&#25104;findByUnique&#65311;&#21738;&#20010;&#25928;&#29575;&#26356;&#39640;&#65311;

        // &#22914;&#26524;&#25214;&#21040;&#35760;&#24405;&#65292;&#24212;&#35813;&#26159;&#21482;&#26377;&#19968;&#39033;&#30446;&#65292;&#23601;&#36820;&#22238;&#36825;&#26465;&#35760;&#24405;&#30340;&#23454;&#20307;&#31867;
        if (list.size() &gt; 0) {
            return list.get(0);
        } else {
            try {
                // &#22914;&#26524;&#27809;&#25214;&#21040;&#35760;&#24405;&#65292;&#38656;&#35201;&#25226;&#36825;&#20010;&#25968;&#25454;&#23383;&#20856;&#20445;&#23384;&#36827;&#25968;&#25454;&#24211;
                // &#38656;&#35201;pojo&#25317;&#26377;&#31354;&#30340;&#26500;&#36896;&#26041;&#27861;
                T namedEntityBean = (T) getEntityClass().newInstance();
                namedEntityBean.setName(beanName);
                save(namedEntityBean);

                return namedEntityBean;
            } catch (InstantiationException ex) {
                System.err.println(ex);
            } catch (IllegalAccessException ex) {
                System.err.println(ex);
            }

            return null;
        }
    }
            </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e3346"></a>26.2.3.&nbsp;&#24212;&#29992;&#22330;&#26223;</h3></div></div></div><p>&#20135;&#21697;&#24405;&#20837;&#30028;&#38754;&#65292;&#20135;&#21697;&#35268;&#26684;&#20026;&#25968;&#25454;&#23383;&#20856;&#65292;&#24405;&#20837;&#20135;&#21697;&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#36873;&#25321;&#24050;&#26377;&#30340;&#35268;&#26684;&#65292;createOrGet()&#26041;&#27861;&#36820;&#22238;&#30340;&#26159;&#25968;&#25454;&#24211;&#20013;&#24050;&#26377;&#30340;&#35760;&#24405;&#12290;</p><p>&#24403;&#20986;&#29616;&#20043;&#21069;&#20174;&#26410;&#24405;&#20837;&#30340;&#35268;&#26684;&#65292;&#19981;&#38656;&#35201;&#25171;&#24320;&#25968;&#25454;&#23383;&#20856;&#31649;&#29702;&#39029;&#38754;&#65292;&#28155;&#21152;&#26032;&#35268;&#26684;&#65292;&#21482;&#38656;&#35201;&#36755;&#20837;&#26032;&#35268;&#26684;&#21517;&#31216;&#65292;createOrGet()&#26041;&#27861;&#33258;&#21160;&#23558;&#27492;&#35268;&#26684;&#21517;&#31216;&#20445;&#23384;&#21040;&#25968;&#25454;&#24211;&#65292;&#24182;&#36820;&#22238;&#23545;&#24212;&#23454;&#20363;&#65292;&#36827;&#34892;&#20851;&#32852;&#12290;</p><p>anni.anews.domain.NewsTag&#23601;&#26159;&#36825;&#31181;&#25968;&#25454;&#23383;&#20856;&#12290;</p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e3351"></a>26.3.&nbsp;&#26641;&#24418;&#32467;&#26500;</h2></div></div></div><p>&#32452;&#32455;&#32467;&#26500;&#65292;&#31995;&#32479;&#33756;&#21333;&#65292;&#20135;&#21697;&#20998;&#31867;&#65292;&#37117;&#26159;&#20197;&#26641;&#24418;&#26174;&#31034;&#30340;&#30340;&#25968;&#25454;&#32467;&#26500;&#65292;&#20027;&#35201;&#29305;&#24449;&#26377;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#26368;&#23569;&#21253;&#25324;&#65306;id&#65292;&#21517;&#31216;&#65292;&#29238;&#33410;&#28857;id&#19977;&#20010;&#23383;&#27573;&#65292;&#22914;&#26524;&#38656;&#35201;&#25490;&#24207;&#65292;&#36824;&#35201;&#26377;&#25490;&#24207;&#23383;&#27573;&#12290;</p></li><li><p>&#35774;&#35745;&#25968;&#25454;&#24211;&#34920;&#32467;&#26500;&#26102;&#65292;&#29238;&#33410;&#28857;id&#26159;&#33258;&#34920;&#20851;&#32852;&#30340;&#22806;&#38190;&#12290;</p></li><li><p>&#21487;&#33021;&#26377;&#20854;&#20182;&#23383;&#27573;&#23646;&#24615;&#65292;&#19981;&#21516;&#32423;&#21035;&#19979;&#30340;&#21517;&#31216;&#21487;&#37325;&#22797;&#12290;</p></li></ol></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e3361"></a>26.3.1.&nbsp;TreeEntityBean.java</h3></div></div></div><pre class="programlisting">
package anni.core.domain.tree;

import java.util.HashSet;
import java.util.Set;

import javax.persistence.Id;
import javax.persistence.Column;
import javax.persistence.CascadeType;
import javax.persistence.FetchType;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.MappedSuperclass;
import javax.persistence.OneToMany;
import javax.persistence.OrderBy;
import javax.persistence.Transient;


/**
 * id&#26159;Long&#30340;Tree&#31867;&#23454;&#29616;.
 *
 * @author Lingo
 * @since 2007-06-06
 * @param &lt;T&gt; &#26412;&#36523;&#23376;&#34920;&#20851;&#32852;&#65292;T&#20195;&#34920;&#30340;&#23601;&#26159;&#26412;&#36523;&#30340;&#31867;&#22411;
 */
public class LongTreeEntityBean&lt;T extends LongTreeEntityBean&gt; {
    private Long id = null;
    private String name = null;
    private Integer theSort = null;
    private T parent = null;
    private Set&lt;T&gt; children = new HashSet&lt;T&gt;(0);

    @Id
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @Column
    public Integer getTheSort() {
        return theSort;
    }
    public void setTheSort(Integer theSort) {
        this.theSort = theSort;
    }

    // &#22810;&#23545;&#19968;&#20851;&#32852;
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "PARENT_ID")
    public T getParent() {
        return parent;
    }
    public void setParent(T parent) {
        this.parent = parent;
    }

    // &#19968;&#23545;&#22810;
    // &#26597;&#25214;children&#30340;&#26102;&#20505;&#65292;&#26681;&#25454;theSort&#27491;&#24207;&#25490;&#21015;&#65292;theSort&#30456;&#21516;&#26102;&#65292;&#26681;&#25454;id&#20498;&#24207;&#25490;&#21015;
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "parent")
    @OrderBy("theSort asc,id desc")
    public Set&lt;T&gt; getChildren() {
        return children;
    }
    public void setChildren(Set&lt;T&gt; childrenIn) {
        children = childrenIn;
    }

    /**
     * @return &#26159;&#21542;&#20026;&#26681;&#33410;&#28857;.
     */
    @Transient
    public boolean isRoot() {
        return parent == null;
    }

    /**
     * @return &#26159;&#21542;&#20026;&#21494;&#23376;&#33410;&#28857;.
     */
    @Transient
    public boolean isLeaf() {
        return (children == null) || (children.size() == 0);
    }

    /**
     * &#19981;&#20801;&#35768;&#23558;&#33258;&#34920;&#22806;&#38190;&#20851;&#31995;&#35774;&#32622;&#25104;&#29615;&#29366;.
     * &#23601;&#26159;&#35828;&#65292;&#24403;&#21069;bean&#30340;&#23376;&#33410;&#28857;&#20013;&#65292;&#22914;&#26524;&#21253;&#21547;entityBean&#65292;&#23601;&#19981;&#33021;&#25226;entityBean&#35774;&#32622;&#20026;&#24403;&#21069;bean&#30340;&#19978;&#32423;&#33410;&#28857;
     *
     * @param entityBean TreeEntityBean
     * @return boolean &#26159;&#21542;&#24418;&#25104;&#29615;&#29366;
     */
    @Transient
    public boolean checkDeadLock(T entityBean) {
        return TreeHelper.checkDeadLock(this, entityBean);
    }
}
            </pre><p>&#21253;&#21547;&#20102;id&#20027;&#38190;&#65292;name&#21517;&#31216;&#65292;theSort&#25490;&#24207;&#32534;&#21495;&#65292;parent&#19978;&#32423;&#33410;&#28857;&#65292;children&#19979;&#32423;&#33410;&#28857;&#38598;&#21512;&#30340;pojo&#12290;&#24182;&#19988;&#25552;&#20379;&#20102;&#19977;&#20010;&#24037;&#20855;&#26041;&#27861;&#65292;isRoot()&#21028;&#26029;&#33410;&#28857;&#26159;&#21542;&#20026;&#26681;&#33410;&#28857;&#65292;isLeaf()&#21028;&#26029;&#33410;&#28857;&#26159;&#21542;&#20026;&#21494;&#23376;&#33410;&#28857;&#65292;checkDeadLock(entityBean)&#21028;&#26029;pojo&#26412;&#36523;&#19982;&#20316;&#20026;&#21442;&#25968;&#20256;&#20837;&#30340;entityBean&#26159;&#21542;&#24418;&#25104;&#29615;&#24418;&#24341;&#29992;&#65292;&#36991;&#20813;&#25226;&#33410;&#28857;&#30340;parent&#20851;&#32852;&#21040;&#33258;&#24049;&#30340;&#23376;&#33410;&#28857;&#19978;&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e3366"></a>26.3.2.&nbsp;TreeEntityDao.java</h3></div></div></div><p>&#25552;&#20379;&#24037;&#20855;&#31867;&#65292;&#33719;&#24471;&#25152;&#26377;&#26681;&#33410;&#28857;&#30340;&#21015;&#34920;&#12290;</p><pre class="programlisting">
    public List&lt;T&gt; loadTops() {
        return find("from " + getEntityClass().getName()
            + " where parent is null");
    }
            </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e3371"></a>26.3.3.&nbsp;&#24212;&#29992;&#22330;&#26223;</h3></div></div></div><p>&#26641;&#24418;&#32467;&#26500;&#24212;&#29992;&#27604;&#36739;&#24191;&#27867;&#65292;&#21508;&#31181;&#33756;&#21333;&#65292;&#20998;&#31867;&#65292;&#37096;&#38376;&#32467;&#26500;&#37117;&#21487;&#20197;&#20351;&#29992;&#26641;&#24418;&#34920;&#31034;</p><p>&#26032;&#38395;&#21457;&#24067;&#20013;&#30340;&#26032;&#38395;&#30446;&#24405;&#65292;&#26435;&#38480;&#31649;&#29702;&#20013;&#30340;&#37096;&#38376;&#65292;&#33756;&#21333;&#37117;&#20351;&#29992;&#20102;&#26641;&#24418;&#32467;&#26500;&#12290;</p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e3375"></a>26.4.&nbsp;extjs&#19982;springmvc&#32467;&#21512;&#65292;&#23454;&#29616;JsonTree</h2></div></div></div><p>TODO:</p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e3378"></a>26.5.&nbsp;extjs&#19982;springmvc&#32467;&#21512;&#65292;&#23454;&#29616;JsonGrid</h2></div></div></div><p>TODO:</p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e3381"></a>26.6.&nbsp;&#35753;extjs&#19982;acegi&#23545;&#25509;</h2></div></div></div><p>&#23545;&#25509;&#30340;&#30446;&#30340;&#26159;&#65292;&#20445;&#35777;&#21069;&#21488;&#32474;&#20029;&#30340;&#24377;&#20986;&#30331;&#24405;&#31383;&#21475;&#65292;&#30331;&#24405;&#25104;&#21151;&#21518;&#21326;&#20029;&#30340;&#31383;&#21475;&#28040;&#22833;&#25928;&#26524;&#65292;&#30331;&#24405;&#22833;&#36133;&#26102;&#20063;&#35201;&#28418;&#20142;&#30340;&#38378;&#29616;&#38169;&#35823;&#25552;&#31034;&#65292;&#19981;&#35201;&#22810;&#27425;&#36339;&#36716;&#12290;</p><p>&#39318;&#20808;&#20026;&#20102;&#35753;acegi&#20462;&#25913;&#26368;&#23569;&#65292;&#20351;&#29992;ajax&#23558;&#24080;&#21495;&#21644;&#23494;&#30721;&#25552;&#20132;&#21040;Filter&#20013;&#12290;&#36825;&#26102;&#20505;&#20998;&#22235;&#31181;&#24773;&#20917;&#32771;&#34385;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#39318;&#27425;&#30331;&#24405;&#25104;&#21151;&#65292;&#36339;&#36716;&#21040;/sandbox/welcome.htm&#12290;&#36820;&#22238;&#24050;&#30331;&#24405;&#29992;&#25143;&#30340;&#30495;&#23454;&#22995;&#21517;&#12290;</p><p>&#25509;&#25910;json&#21518;&#36827;&#34892;&#30340;&#25805;&#20316;&#65306;&#25171;&#24320;&#24038;&#20391;&#33756;&#21333;&#65292;&#26681;&#25454;&#30331;&#24405;&#29992;&#25143;&#30340;&#20449;&#24687;&#65292;&#26174;&#31034;&#23545;&#24212;&#33756;&#21333;&#12290;&#26174;&#31034;&#24403;&#21069;&#30331;&#24405;&#29992;&#25143;&#30340;&#30495;&#23454;&#22995;&#21517;&#12290;</p></li><li><p>&#39318;&#27425;&#30331;&#24405;&#22833;&#36133;&#65292;&#36820;&#22238;json&#26684;&#24335;&#30340;&#20986;&#38169;&#20449;&#24687;&#65292;&#21487;&#33021;&#20026;&#65306;&#29992;&#25143;&#19981;&#23384;&#22312;&#65292;&#23494;&#30721;&#38169;&#35823;&#65292;&#26080;&#27861;&#37325;&#22797;&#30331;&#24405;&#65292;&#39564;&#35777;&#30721;&#38169;&#35823;&#12290;</p><p>&#36825;&#26102;&#20505;&#38656;&#35201;&#26681;&#25454;&#36820;&#22238;&#30340;&#38169;&#35823;&#20449;&#24687;&#65292;&#24377;&#20986;alert&#23545;&#35805;&#26694;&#65292;&#25110;&#32773;suggest&#26694;&#12290;</p></li><li><p>&#35775;&#38382;&#22833;&#36133;&#21518;&#65292;&#20877;&#27425;&#30331;&#24405;&#65292;&#39564;&#35777;&#21518;&#25317;&#26377;&#27492;&#26435;&#38480;&#12290;</p><p>&#25171;&#24320;&#24038;&#20391;&#33756;&#21333;&#65292;&#35774;&#32622;&#30495;&#23454;&#22995;&#21517;&#65292;&#20026;iframe&#22635;&#20805;&#36820;&#22238;&#30340;&#39029;&#38754;&#20449;&#24687;&#12290;</p></li><li><p>&#35775;&#38382;&#22833;&#36133;&#21518;&#65292;&#20877;&#27425;&#30331;&#24405;&#65292;&#39564;&#35777;&#21518;&#20381;&#28982;&#27809;&#26377;&#26435;&#38480;&#12290;</p><p>&#25171;&#24320;&#24038;&#20391;&#33756;&#21333;&#65292;&#35774;&#32622;&#30495;&#23454;&#22995;&#21517;&#65292;&#20026;iframe&#22635;&#20805;&#36820;&#22238;&#30340;&#38169;&#35823;&#20449;&#24687;&#12290;&#65288;&#36825;&#26102;&#20505;&#65292;&#20854;&#23454;&#26159;&#25353;&#29031;&#27491;&#24120;&#30340;URL&#21435;&#35831;&#27714;&#65292;&#19981;&#36807;&#22240;&#20026;&#27809;&#26377;&#26435;&#38480;&#65292;&#25152;&#20197;&#21322;&#36335;&#34987;&#25318;&#25130;&#65292;&#21464;&#25104;&#20102;&#26174;&#31034;&#26080;&#26435;&#38480;&#30340;&#28040;&#24687;&#12290;&#65289;</p></li></ol></div><p>&#36825;&#26679;&#65292;&#27599;&#27425;&#26080;&#35770;&#25104;&#21151;&#22833;&#36133;&#12290;&#37117;&#35201;&#27714;&#36820;&#22238;&#30340;&#26159;json&#65292;&#25913;&#36896;AuthentikcationProcessFilter&#65292;&#23558;&#25152;&#26377;&#36339;&#36716;&#21629;&#20196;&#37117;&#36716;&#21521;LoginController&#65292;&#22312;LoginController&#20013;&#26500;&#36896;json&#36820;&#22238;&#12290;</p><p>&#22240;&#20026;&#21482;&#23558;&#30331;&#24405;&#30340;&#36807;&#31243;&#20462;&#25913;&#20026;&#36820;&#22238;json&#65292;&#25152;&#20197;&#35206;&#30422;successfulAuthentication()&#26041;&#27861;&#65292;&#23558;&#26368;&#21518;&#30340;sendRedirect()&#20462;&#25913;&#20026;&#36716;&#21521;LoginController.loginSuccess&#26041;&#27861;&#65292;&#21516;&#26102;&#25226;targetUrl&#38656;&#35201;&#36339;&#36716;&#30340;URL&#38468;&#24102;&#19978;&#65292;&#22312;logingSuccess()&#37324;&#29983;&#25104;json&#65292;&#38468;&#24102;success:true&#30331;&#24405;&#25104;&#21151;&#26631;&#24535;&#65292;response:&#29992;&#25143;&#30495;&#23454;&#22995;&#21517;&#65292;callback:iframe&#38656;&#35201;&#26174;&#31034;&#30340;URL&#12290;&#22312;js&#37324;&#22788;&#29702;&#21518;&#65292;&#23436;&#25104;&#25972;&#20010;&#23545;&#25509;&#36807;&#31243;&#12290;</p><p>js&#26041;&#38754;&#65292;&#23637;&#24320;&#23545;&#35805;&#26694;&#65292;&#22788;&#29702;&#30331;&#24405;&#30340;&#20195;&#30721;&#20998;&#21035;&#22312;widgets/sandbox/index.js&#19982;widgets/lingo/form/LoginDialog.js&#20013;&#12290;&#19981;&#36807;&#30495;&#27491;&#21457;&#36215;&#26816;&#39564;&#30331;&#24405;&#30340;&#20837;&#21475;&#22312;needLogin.ftl&#20013;&#65292;&#22312;&#20854;&#20013;&#35843;&#29992;window.top.index.isLogin()&#65292;&#24403;&#27880;&#38144;&#30340;&#26102;&#20505;&#65292;&#20063;&#20250;&#36339;&#36716;&#21040;needLogin.htm&#26469;&#35302;&#21457;&#30331;&#24405;&#20107;&#20214;&#12290;</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="practice.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="database.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;25&nbsp;&#31456;&nbsp;practice<span class="emphasis"><em>&#65288;&#24453;&#25972;&#29702;&#65289;</em></span>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;27&nbsp;&#31456;&nbsp;&#25968;&#25454;&#32500;&#25252;</td></tr></table></div></body></html>